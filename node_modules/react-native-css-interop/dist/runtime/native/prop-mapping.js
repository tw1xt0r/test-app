"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getNormalizeConfig = void 0;
function getNormalizeConfig(mapping) {
    const config = new Map();
    const dependencies = new Set();
    const sources = new Set();
    for (const [key, options] of Object.entries(mapping)) {
        let target;
        let nativeStyleToProp;
        if (!options)
            continue;
        if (typeof options === "boolean") {
            target = key;
        }
        else if (typeof options === "string") {
            target = options;
        }
        else if (typeof options.target === "boolean") {
            target = key;
            nativeStyleToProp = options.nativeStyleToProp;
        }
        else if (typeof options.target === "string") {
            target = options.target;
            nativeStyleToProp = options.nativeStyleToProp;
        }
        else {
            throw new Error(`Unknown cssInterop target from config: ${JSON.stringify(config)}`);
        }
        const existing = config.get(target) ?? { sources: [] };
        if (existing.sources.length === 0) {
            config.set(target, existing);
        }
        existing.sources.push(key);
        dependencies.add(target);
        dependencies.add(key);
        sources.add(key);
        if (nativeStyleToProp) {
            existing.nativeStyleToProp = {
                ...existing.nativeStyleToProp,
                ...nativeStyleToProp,
            };
        }
    }
    return {
        config,
        dependencies: Array.from(dependencies),
        sources: Array.from(sources),
    };
}
exports.getNormalizeConfig = getNormalizeConfig;
//# sourceMappingURL=prop-mapping.js.map